### Message-Handler

*Микросервис на Go, принимает сообщения через HTTP API, сохраняет их в PostgreSQL, 
а затем отправляет в Kafka для дальнейшей обработки. Обработанные сообщения помечаются. Сервис также 
предоставляет API для получения статистики по обработанным сообщениям.*

### Ручки:

- Для добавления и изменения, в теле(Body) запроса, нужно использовать: {"message": "сообщение"}

| Метод    | Ручка            | Описание                          |
|----------|------------------|-----------------------------------|
| `POST`   | /messaggio/      | Добавить сообщение                |
| `GET`    | /messaggio/      | Получить все сообщения            |
| `GET`    | /messaggio/stats | Получить статистику по сообщениям |
| `GET`    | /messaggio/:id   | Получить сообщение по его UUID    |
| `DELETE` | /messaggio/:id   | Удалить сообщение по его UUID     |
| `PATCH`  | /messaggio/:id   | Изменить сообщение по его UUID    |

### Запуск локально...

1. `docker-compose -f ./deploy/docker-compose.yml --env-file ./configs/.env up -d --remove-orphans --build`

2. Ожидаем запуска...

### Переменные окружения

| Название               | Описание                            | Дефолтное значение                                                                    |
|------------------------|-------------------------------------|---------------------------------------------------------------------------------------|
| `API_PORT`             | Порт веб-сервера                    | `8080`                                                                                |
| `API_DEBUG`            | Работать ли серверу в DEBUG-режиме  | `true`                                                                                |
| `KAFKA_CONSUMER_GROUP` | Название консьюмер группы           | `consumergroup`                                                                       |
| `KAFKA_BROKER`         | Адрес брокера сообщений             | `kafka-1:9092`                                                                        |
| `KAFKA_TOPIC`          | Название топика сообщений           | `messages_topic`                                                                      |
| `POSTGRES_PASSWORD`    | Пароль для пользователя базы данных | `somestrongpassword`                                                                  |
| `POSTGRES_USER`        | Имя пользователя базы данных        | `Messaggio`                                                                           |
| `POSTGRES_DB`          | Название базы данных                | `db_messages`                                                                         |
| `POSTGRES_DSN`         | DSN для подключения к базе          | `postgresql://Messaggio:somestrongpassword@postgres:5432/db_messages?sslmode=disable` |
